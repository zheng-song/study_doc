
% !TeX program = xelatex

%使用hustthesis这个模板。
% draft版本的正文页包括页眉(“华中科技大学xx学位论文”)、页眉修饰线(双线)、页脚(页码)和页脚修饰线(单线)。
% final版本的正文页不包括页眉、页眉修饰线和页脚修饰线，仅包 含页脚（页码）。如果不指定，默认设置为final。

% degree用来指定论文的种类
% language用来指定论文语言。特别的，如果设定为english-draft，将会剔除论文中的所有中文内容，这有利于在未安装中文字体的环境中使用。如果不指定，默认设置为 chinese。


\documentclass[format=draft,language=chinese,degree=master]{hustthesis}
%\documentclass[format=final,language=chinese,degree=master]{hustthesis}

\setcounter{tocdepth}{2} %设置目录的层级

%使用下面的这两个宏包来生成带书签和超链接的PDF文件。
%\usepackage[bookmarks,bookmarksopen,bookmarksdepth=2]{hyperref}
%\usepackage[pdftex,CJKbookmarks=true,colorlinks=true]{hyperref} %LaTeX Error: Option clash for package hyperref
\usepackage{indentfirst}

\stuno{M201672905}
\schoolcode{10487}
\title{基于Vxworks的调试通道的设计与实现}{A design and implementation of debug channel based on Vxworks.}
\author{郑松}{Joe}
\major{计算机应用技术}{Computer Applications Technology}
\supervisor{张杰\hspace{1em}讲师}{Instructor JieZhang}
\date{2018}{3}{26}
%\date{\today}

\zhabstract{
	通常在软件开发、移植、运行时都需要输出一些调试或日志信息，对于嵌入式设备而言通常使用串口来进行这些信息的传输，在VxWorks的集成开发环境Tornado中也有相关的调试工具，但是其比较适合用户软件的开发环境当中，不适用于而生产环境当中，而且目前大多数的设备都已不再将RS-232的串口作为必须的标准接口，而是大量的使用USB接口，因此在调试信息的传输过程中只能够使用USB接口，本文基于VxWorks开发出一个小巧易用的调试或日志信息的调试通道，使用CP2102模块来进行USB口转串口的实际硬件部分，并编写了一个VxWorks下的USB口转串口驱动以及上层的应用层接口部分， 本项目来源于中船重工的实际需求。
	
	本文首先对课题的背景和需求进行了分析，给出了总体的设计方案，并给出介绍了本次的设计中需要使用的和了解的关键技术。然后从VxWorks下的I/O系统和驱动程序的关系入手，分析了VxWorks下I/O系统调用和驱动程序的实现过程，在此基础上实现了我们调试通道的必须的USB口转串口驱动。接着我们设计了调试通道的传输协议，并给出了两个上层应用的接口， 一个Log日志接口，一个标准输出重定向接口。	
	
	最后我们通过对系统的各个部分进行测试和整体测试，验证了本次的调试通道设计基本完成，系统运行可靠，满足所需完成的要求。	
	
}
\zhkeywords{嵌入式系统，设备驱动开发，USB口转串口，VxWorks，CP2102}

\enabstract
{
    Generally, some debugging or log information needs to be output during software development, porting, and runtime. For embedded devices, serial ports are commonly used for the transmission of those information. There are also related debugging tools in Tornado, an integrated development environment of VxWorks. It is more suitable for the development environment of the user software, but not for the production environment, and most of the current devices no longer use the RS-232 serial port as a required standard interface, but use a large number of USB interfaces, so debugging In the process of information transmission, only the USB interface can be used. This article has developed a small and easy-to-use debugging or log information debugging channel based on VxWorks. It uses the CP2102 module to perform the USB port to the actual hardware part of the serial port, and has written a VxWorks. The USB port to serial port driver and the upper application layer interface part, this project comes from the actual needs of CSIC(China Shipbuilding Industry Corporation).
    
    This paper first analyzes the background and requirements of the project, gives the overall design plan, and gives the key technologies that are used and understood in this design. Then, starting from the relationship between I/O system and driver under VxWorks, the process of I/O system call and driver under VxWorks is analyzed. Based on this, the necessary USB port to serial port driver of our debug channel is realized. Then we designed the transmission protocol of the debug channel, and gave two upper application interfaces, a Log log interface, and a standard output redirection interface.
    
    Finally, we tested and tested the various parts of the system to verify that the debug channel design was basically completed, the system was running reliably, and the required requirements were met.

}
\enkeywords
{embedded system, device driver development, USB port to serial port, VxWorks, CP2102}

\begin{document}

% frontmatter用于设定论文的状态、改变样式，其具体使用见简单示例。 
% frontmatter用在文档最开始，表明文档的前言部分（如封面，摘要，目录等）的开 始。
\frontmatter

% maketitle的作用和makecover的作用相同，用于生成封面和版权页面
\maketitle


% makeabtract用于生成中英文的摘要页面。
\makeabstract

% tableofcontents用于生成目录
\tableofcontents

% listoffigures 和 listoftables 分别用于生成图片和表格索引，可以根据要求在论文的前言中使用或者是在附录中使用
%\listoffigures
%\listoftables

% mainmatter表示论文正文的开始。
\mainmatter

\clearpage
\include{data/chap01}

\clearpage
\include{data/chap02}

\clearpage
\include{data/chap03}

\clearpage
\include{data/chap04}

\clearpage
\include{data/chap05}

\clearpage
\include{data/chap06}
% backmatter用于表示论文的正文结束
\backmatter

%ack 环境用于致谢页面
\begin{ack}
研究生生活即将结束，在此，我要感谢所有教导我的老师和陪伴我一齐成长的同学，他们在我的研究生生涯给予了很大的帮助。本论文能够顺利完成，要特别感谢我的导师张杰老师，张杰老师对该论文从选题，构思到最后定稿的各个环节给予细心指引与教导,正是在张老师的指导和帮助下,我才能够克服各种困难,突破一个又一个的技术难题,最终完成该调试通道的设计，使我得以最终完成毕业论文设计！     

在硕士学位论文即将完成之际，我想向身边曾经给我帮助和支持的人们表示最忠心的感谢。首先要感谢的就是我的导师张杰老师，在我的研究生生活的第一天起便给予我许多的帮助。老师对我的严格要求使我始终保持着一丝不苟的态度对待每一次研究和身边发生的每一件事，他自身严谨的治学态度以及为人处世的坦荡都让我钦佩不已，也是我一直向之前进的目标，正是导师的悉心培养才有了今天的我和我的一些研究成果。老师不仅在科研方面给我很多的灵感与帮助，让我在研究的道路上走得很顺畅；同时也教会了我很多关于人生的道理，让我有所成长。我与老师的关系亦师亦友，老师总会是我们最坚实的后盾，让我们能够放心的往前飞。相信在今后的工作与生活中，我都会不断的记起老师的谆谆教诲，也能够因此少走很多弯路，更好的为社会、为国家做出更大的贡献。在此祝愿我的导师身体健康，幸福欢乐！
当然我也要感谢许多已经毕业或仍在深造的师哥师姐，他们也给予了我许多的帮助以及支持鼓励。在我刚入门时耐心指导我，不厌其烦的解答我的疑问；也在我能够独当一面时用他们的经验提醒我可能会不注意的一些小细节。于是现在的我也能够很好的为师弟师妹们答疑解惑，是他们给我的帮助和在他们身上看到的善意，使我以更加友善柔和的目光去看待这个看似冷酷实则温柔的世界。

最后我还要感谢我的战友们，我们一起攻克研究过程中遇到的重重难关，在最艰难的时候互相鼓励，互帮互助。在这看似枯燥的道路上，总是能汲取出甘甜的也是我同甘苦的战友们。
\end{ack}

% bibliography用于生成参考文献。
\nocite{*}
% \bibliographystyle{plain}
\bibliography{ref/myref.bib}


\end{document}

\endinput
%%
%% End of file `hustthesis-zh-example.tex'.
