# 1. [USB转TTL、USB转串口、USB转RS-232的区别](http://blog.sina.com.cn/s/blog_801127100102vsae.html)

​	因为单片机通信接口的电平逻辑和PC通信接口的电平逻辑不同，PC机上的通信接口有USB接口，相应的电平逻辑遵照USB的原则；还有DB9接口，相应的电平逻辑遵照RS-232原则；而单片机上的串行通信通过单片机的RXD、TXD、VCC、GND四个引脚，相应的电平逻辑遵照TTL原则。

​	进行转换的目的是把电平转换到双方都能够识别的状态。



# 2. [串口、COM口、TTL、RS-232的区别详解](http://www.dzsc.com/data/2016-10-19/110834.html)

1. 串口、COM口指的是物理接口形式(硬件)。而TTL、RS-232、RS-485是指电平标准(电信号)。
2. 在连接设备的时候，一般只会接GND、RX、TX。不会接VCC或者+3.3V的电源线，避免与目标设备上的供电冲突。
3. PL2303、CP2102芯片是USB转TTL串口的芯片，用USB来扩展串口(TTL)电平。
4. MAX232芯片是TTL电平与RS-232电平的专用双向转换芯片，可以TTL转RS-232，也可以RS-232转TTL。
5. TTL标准是低电平为0，高电平为1(+5V电平)。RS-232标准是正电平为0，负电平为1。



**串口、COM口：**

COM口即串行通讯端口，简称串口。这里区别于USB的"通用串行总线"和硬盘的"SATA"。一般我们见到的是两种物理标准。D型的9针插头和4针的杜邦头两种。4针的通常也会有第五根引脚--3.3V电源引脚。





## 2.1 串口通信

​	计算机与计算机之间或者是计算机与终端设备之间的通信方式有串口通信，并行通信以及网络通信等。使用串行通信方式的优点是成本低，使用线路少，而且可以解决由于不同的线路特性造成的问题，因此在远距离传输方面也是一种不错的选择。对于特性相异的设备要使用串行通信来连接时，必须保证双方所使用的的标准接口是一致的。一般的串口标准有RS-232、RS-485等[^12]

### 2.1.1 RS-232串口标准

​	串口通信中，根据实际的设计需要可以选择同步传输和异步传输2中方式。同步传输方式就是指在传输的过程中不需要再每一个字符之间进行停止然后再开始的操作，这样可以使得效率提高，不过由于更加复杂的传输，收发两端的时间一致性要求比较高，误差率要求比较低[^14]。同步传输方式适用于一端和多端之间的串口数据传递。异步传输方式是要针对每一个字符都完成开始和停止的操作，这样导致通信效率略低，不过由于传输很容易，收发两端的时间一致性要求比较低，可以许可一些误差的存在。异步传输方式适用于一端到一端的数据传输[^15]。		

​	从通信的方向性来看，串口通信有单工、半双工和全双工三种方式。单工通常使用一根导线，通信只在一个方向进行，如监视器、打印机、电视机。半双工可以在两个方向上进行，但是方向切换时有时间延迟，如打印机。全双工可以在两个方向上运行，且时间的切换没有时间延迟，适用于那些不能有时间延迟的交互式应用，如远程监控等。

### 2.1.3 端口参数

​	XON/XOFF是控制字符流启动的标志。发送端和接收端将这两个字符给予不同于普通字符的含义，在要发送的数据中插入这两个字符标识开始和结束，以此来控制字符流。在多数情况下，握手信号线DSR作为渠道，DCE通知DTE已经可以接收传送来的数据，这个过程叫做硬件设备流控制[^19-20]。第一个异步传送适配器可以得到硬件中断4，然后第二个异步传送适配器可以得到硬件中断3(其中0是定时器，1是键盘，2是保存，3和2串联，4和1串联，5是硬盘，6是软盘，7和1并联)，COM1地址范围是3F8-3FF，COM2地址范围是2F8-2FF。

​	串口通信技术在工程使用中主要是用于数据的采集，计算机系统的监控等方面，串口通信技术在应用中通常采用的流程图模型如下所示：

![串口通信技术在工程中应用流程](http://upload-images.jianshu.io/upload_images/6128001-8d2dac1f2e127473.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



### 2.2.2 线程间通信

​	在进程的运行过程中,他所建立的不同线程之间有时候需要进行数据的交互。通常的话可以建立全局变量，这也是最简单的线程间数据共享的方法[^26]。建立的全局变量使得所有的线程都可以在自己地址空间中使用这个变量。一般的情况下全局变量是在实现文件的头部定义，在同一个进程中的不同线程都可以使用它[^27]。

​	还有一种情况是某一些线程之间要进行一些状态的交换，比如说工作者线程有时候要把状态传递给主线程，主线程做出相应的操作，在这种情况下可以使用消息机制，因为使用全局变量的话是难以达到这个作用的。基于这个情况，使用用户自定义消息是个不错的选择。通过在消息中指定要发送到线程以及指定消息的参数来承载要发送的消息，然后使用API来将消息发送到指定的线程的消息队列中等待处理。而接收消息的线程不断在处理消息队列中的消息。这个过程总结起来包括4个环节，开发人员自定义的消息，声明消息回调函数，定义消息回调函数中对消息的处理，以及发送自定义的消息。

### 2.2.3 线程同步

​	在多线程的使用当中，不同的线程有时候要访问以及修改同一个资源，就会造成也许不是开发人员所预期的结果，或者造成一些冲突。这种情况下，就有了线程同步。同步的方式主要有四种：临界区(Critical Section),信号量(Semaphore),互斥体(Mutex),事件(Event)。

- 临界区(Critical Section): 保证在进程中的资源在一个时刻上只能有一个线程可以访问到。使用这种方法的过程中，多个线程将会访问以及修改某一个共享的资源对象，这个资源对象将会有一个临界区，对于不同的线程，同一个时刻只能有一个线程进入到这个临界区，这个线程可以访问到该资源对象，其他线程请求访问这个资源的时候发现这个临界区被占用，就只能够等待。当占据临界区的线程使用完了以后释放了该临界区，其他的线程再按照优先级来确定哪个线程进入。也就是说，资源在某一个时刻只能够由一个线程使用[^29]。临界区和临界区对象是处于对应关系的。当线程需要访问某个数据资源，该线程就调用lock()方法以占据临界区。当着额数据资源使用完毕以后，该线程再调用Unlock()方法以释放临界区对象，这样就使得其他线程可以对该数据资源进行访问。
- 互斥体(Mutex)：类似于临界区，不过在使用过程上更加复杂。而且临界区只能够用于同一个进程中的不同线程之间的同步，互斥体可以在不同的进程之间进行同步。在使用的过程中，首先通过CreateMutxe()来建立一个句柄或者说是互斥体，然后通过OpenMutex来打开这个资源的互斥体，其他的线程通过使用WaitForSingleObject()来检测这个资源是否得到了释放。当使用资源的互斥体使用完毕以后，通过ReleaseMutex()来释放该资源的使用权。
- 信号量(Semaphore)：类似于互斥体，信号量允许同一个资源在某一个时刻由不同的线程访问，这其中引入了一个计数机制。在使用的过程中，首先使用CreateSemaphore()来创建一个句柄或者说是信号量，然后通过OpenSemaphore()来打开信号量，其他在等待使用该资源的线程通过WaitForSingleObject()来检测资源被使用线程的数量是否达到设定值[^30]。当使用完成以后，可以使用ReleaseSemaphore()来释放该线程对这个资源的使用，同时计数也减1。
- 事件(Event)：是通过通知操作的方式来保持线程的同步。在使用过程中，首先通过CreateEvent()来创建一个句柄或者说是事件对象，接下来通过OpenEvent来打开已经创建的事件对象，然后通过线程调用资源时使用SetEvent()和ResetEvent()来控制这个事件的信号
- ​



[^12]: 
[^14]: 
[^15]: 
[^19]: 
[^20]: 
[^26]: 
[^29]: 





以下内容摘自[嵌入式Linux设备驱动程序的设计与研究](http://xueshu.baidu.com/s?wd=paperuri%3A%28866d414b8629ae2469f1440d13a31dd0%29&filter=sc_long_sign&tn=SE_xueshusource_2kduw22v&sc_vurl=http%3A%2F%2Fwenku.baidu.com%2Fview%2F1a823a2dcfc789eb172dc88f.html&ie=utf-8&sc_us=3038571180740317288)

# 第三章 嵌入式Linux下USB设备驱动的设计与研究







# Qt的特点

​	Qt是一个跨平台的C++应用程序框架，支持Windows、Linux、Mac OS X、Android、iOS、Windows Phone、嵌入式系统等。也就是说，Qt可以同时支持桌面应用程序开发、嵌入式开发和移动开发，覆盖了现有的所有主流平台。你只需要编写一次代码，发布到不同平台前重新编译即可。

​	Qt不仅仅是一个GUI库，他除了可以创建漂亮的界面，还有很多其他的组件，例如，你不在需要研究STL，不在需要C++的\<string\>头文件，不再需要去找解析XML、连接数据库、socket的各种第三方库，这些Qt都已经内置了。

​	Qt虽然庞大，封装较深，但是它的速度并不慢，虽然不及MFC，但是比Java、C#要快。Qt程序最终会编译成本地代码，而不是依托于虚拟机。



## Qt可以做什么

​	使用Qt开发的程序非常多。1997年，Qt被用来开发Linux桌面环境KDE，大获成功，使得Qt成为Linux环境下开发C++ GUI程序的事实标准。Linux也是嵌入式的主力军，广泛应用于消费类电子、工业控制、军工电子、电信/网络/通讯、航空航天、汽车电子、医疗设备、仪器仪表等相关行业，这些地方都有 Qt 的影子。

​	在Windows下，GUI的解决方案比较多，基于C++的有Qt、MFC、WTL、wxWidgets、DirectUI、Htmlayout，基于C#的有WinForm、WPF，基于Java的有AWT、Swing，基于Pascal的有Delphi，还有国内初露头角的aardio；若你有Web开发经验，也可以基于Webkit或者是Chromium将网页转换为桌面程序。



## Qt 开发 Windows 桌面程序的优点

- 简单易学：Qt 封装的很好，几行代码就可以开发出一个简单的客户端，而 MFC 封装简陋，还需要了解 Windows API，普遍反映难学。
- 资料丰富：资料丰富能够成倍降低学习成本，否则你只能去看源码，关于 DirectUI、Htmlayout、aardio 的资料就很少。
- 漂亮的界面：Qt 很容易做出漂亮的界面和炫酷的动画，而 MFC、WTL、wxWidgets 比较麻烦。
- 独立安装：Qt 程序最终会编译为本地代码，不需要其他库的支撑，而 Java 要安装虚拟机，C#要安装 .NET Framework。
- 跨平台：如果你的程序需要运行在多个平台下，同时又希望降低开发成本，Qt 几乎是必备的。



## 使用Qt开发的程序

​	WPS、YY语音、Skype、豆瓣电台、虾米音乐、淘宝助理、千牛、暴雪的战网客户端、VirtualBox、Opera、咪咕音乐、Google地图、Adobe Photoshop Album 等。

​	但是，由于Android本身支持Java，iOS本身支持Objective-C和Swift，所以Qt 在移动端的贡献寥寥无几。

